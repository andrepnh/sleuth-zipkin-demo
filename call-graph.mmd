graph LR
    O(order-processor) --> P(payment-gateway)
    O --> F(fulfillment-plan)
    F -->|Reserve| I(inventory-reservation)
    P --> Py{Payment successful?}
    Py -->|Yes| S(shipment)
    Py -->|No, cancel reservation| I